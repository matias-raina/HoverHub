---
title: Diagrama de Arquitectura de Componentes - Sistema HoverHub
---
flowchart TB
    %% Usuarios
    piloto["Piloto de Drones<br/>Busca trabajos"]
    cliente["Cliente<br/>Publica trabajos"]

    %% Capa Frontend
    subgraph frontend["FRONTEND - Next.js + React + TypeScript"]
        webapp["Aplicación Web"]
        
        subgraph paginas["Páginas"]
            inicio["Inicio"]
            perfil["Perfil"]
            listado_trabajos["Listado de Trabajos"]
            mis_trabajos["Mis Trabajos"]
            favoritos["Favoritos"]
            alertas["Alertas"]
            configuracion["Configuración"]
            ayuda["Ayuda"]
        end
        
        subgraph componentes["Componentes UI"]
            lista_trabajos["ListaTrabajos"]
            sidebar["Sidebar"]
            cartas["Cartas"]
            formularios["Formularios"]
        end
    end

    %% Capa Backend
    subgraph backend["BACKEND API - Python REST"]
        api["API Gateway<br/>Autenticación & Enrutamiento"]
        
        subgraph servicios["Microservicios"]
            autenticacion["Servicio de Autenticación<br/>JWT + Sessions"]
            usuarios["Servicio de Usuarios<br/>CRUD Usuarios"]
            trabajos["Servicio de Trabajos<br/>CRUD Trabajos"]
            postulaciones["Servicio de Postulaciones<br/>Postulaciones"]
            favoritos_svc["Servicio de Favoritos<br/>Guardados & Alertas"]
        end
    end

    %% Capa de Almacenamiento
    subgraph almacenamiento["ALMACENAMIENTO"]
        db[("PostgreSQL<br/>Base de Datos Principal")]
        archivos[("Object Storage<br/>S3-Compatible")]
    end

    %% Servicios Externos
    subgraph servicios_externos["SERVICIOS EXTERNOS"]
        email["Servicio de Email<br/>SMTP"]
        pago["Gateway de Pago<br/>Futuro"]
    end

    %% Conexiones de Usuario
    piloto & cliente -->|HTTPS| webapp

    %% Conexiones internas del Frontend
    webapp --> paginas
    webapp --> componentes

    %% Frontend a Backend
    webapp -->|"JSON/HTTPS<br/>API Calls"| api

    %% API Gateway a Servicios
    api -->|"/auth"| autenticacion
    api -->|"/users"| usuarios
    api -->|"/jobs"| trabajos
    api -->|"/applications"| postulaciones
    api -->|"/favorites"| favoritos_svc

    %% Servicios a Base de Datos
    autenticacion & usuarios & trabajos & postulaciones & favoritos_svc -->|SQL| db

    %% Servicios a Almacenamiento de Archivos
    usuarios & trabajos -->|"Upload/Download"| archivos

    %% Servicios a Externos
    autenticacion & postulaciones -->|SMTP| email
    postulaciones -.->|"Futuro"| pago

    %% Estilos
    classDef userClass fill:#fff,stroke:#000,stroke-width:2px,color:#000
    classDef frontendClass fill:#e0e0e0,stroke:#000,stroke-width:2px,color:#000
    classDef backendClass fill:#c0c0c0,stroke:#000,stroke-width:2px,color:#000
    classDef storageClass fill:#f5f5f5,stroke:#000,stroke-width:2px,color:#000
    classDef externalClass fill:#d3d3d3,stroke:#000,stroke-width:2px,color:#000

    class piloto,cliente userClass
    class webapp,paginas,componentes,inicio,perfil,listado_trabajos,mis_trabajos,favoritos,alertas,configuracion,ayuda,lista_trabajos,sidebar,cartas,formularios frontendClass
    class api,autenticacion,usuarios,trabajos,postulaciones,favoritos_svc backendClass
    class db,archivos storageClass
    class email,pago externalClass
